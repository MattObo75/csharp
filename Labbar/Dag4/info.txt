Torsdagsgodis
Vi gör ett console program som läser in en textfil som innehåller informationen om olika länder. Det finns fyra kolumner med data: Country, Population, GDP och Currency. När filen är inläst så ska programmet lägga ut innehållet i en ny lista, kolla om det finns tomma rader i den filen och rensa ut dessa och som sista åtgärden, kolla upp om det finns några länder som börjar på bokstaven S. Dessa länder kommer då att sparas i en till lista och visas upp i Consolen.
Vi skapar en algoritm som är en sekvens av steg, d v s vad och i vilken ordning behöver göras för att skapa ett sådant program.
1. Läs in filens namn i en variabel.
Det kan göras enkelt om vi känner till lagringsplatsen.
string filePath = @"X:\source\c#\Labbar\Dag4\Countries.txt";
2. Skapa ett objekt av fillänken med StreamReader() klassen som har inputargument av typen sträng. Vi sänder filllänken dit. Nu har vi hela innehållet av filen i variabeln reader. using ser till att filen stängs automatiskt. Using används för alla objekt som anropar externa resurser och behöver städas upp när allt är klart, t ex
- filer
- nätverk
- databaskopplingar
- strömmar
- grafik / GDI
3. StreamReader har en metod ReadLine() som läser en rad i taget och flyttar till nästa rad. Vi använder ReadLine() inne i StreamReader(). All filinläsning måste ske där. Vi lägger raderna i en lista allLInes. Den måste skapas i förväg.
4. Vi kan kolla upp den inlästa filen huruvida det kom upp några tomma rader eller blanksteg. Det kan testas om använder en metod som finns i string på vår lista och använder IsNullOrWhiteSpace() för det. Det returnerar true om det finns blanksteg eller något saknas. Vi kan använda foreach eller for-loop. Som ni ser, behövs en till lista validCountries, som ska skapas i förväg.
5. Nu har vi en lista validCountries som innehåller rader där varje rad är en sträng som innehåller namn, befolkningsmängd, bnp och valutakoden. Vi kan använda foreach för att skapa ett villkor och hitta de raderna där namn på landet börjar på ett S. Vi måste förstå att varje rad i validCountries ser ut så här: Sweden;10500000;635000000000;SEK Då splittar vi varje rad i strängar och sedan kommer åt den första strängen. Då kollar vi om den startar på ett S.
6. Men det går även att använda LINQ för att snabbare hitta de rätta raderna. LINQ används för att filtrera, sortera, gruppera och plocka data från t.ex. listor, arrayer och filer utan loopar. Det skapas ett lambda-uttryck – alltså en kort anonym funktion.
Tänk så: “ta emot något -> gör något med det”.
Läs det som: “ta varje n i numbers så att n är större än 5”.

using (StreamReader reader = new StreamReader(filePath))
{
    string line;

    while ((line = reader.ReadLine()) != null)
    {
        allLines.Add(line);
    }

    List<string> validCountries = new List<string>();

    Console.WriteLine("Countries that start with 'S':");

    foreach (string country in allLines)
    {
        if (!string.IsNullOrWhiteSpace(country))
        {
            validCountries.Add(country);
            // Console.WriteLine(country);
        }
    }
    
    foreach (string country in validCountries)
    {
        string[] parts = country.Split(';');
        if (parts[0].StartsWith("S"))
        {
            Console.WriteLine(country);
        }
    } 
}

Övning 2
Analysera valutor i filen och ta reda på:
- Hur många länder använder varje valuta.
- Vilken valuta som används av flest länder.
- Lista alla länder som använder den valutan.
Krav
Använd:
- GroupBy
- Count
- Where
- Minst en lösning med foreach
- Skriv ut resultatet på ett tydligt sätt i konsolen
- Hantera felaktiga data utan att programmet kraschar.
- Kommentera koden
